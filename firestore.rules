rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
  
    // Impostazioni dell'app:
    // - Chiunque può leggerle (necessario per la pagina di prenotazione pubblica).
    // - Solo l'amministratore autenticato può scriverle.
    match /settings/{adminUid} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == adminUid;
    }

    // Prenotazioni:
    // - Chiunque può crearne una nuova.
    // - Solo l'amministratore proprietario può leggere l'elenco,
    //   aggiornare o cancellare una prenotazione.
    match /bookings/{bookingId} {
      allow create: if true;
      allow read, update, delete: if request.auth != null && request.auth.uid == resource.data.ownerUid;
    }
  }
}